<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Getting Started - RainJS</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      background: #f5f5f5;
    }
    .example {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      margin: 1rem 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h1 { color: #333; }
    h2 { color: #666; margin-top: 2rem; }
    
    /* These styles should only affect open shadow DOM */
    .external-styling {
      background: lightyellow !important;
      border-left: 4px solid orange !important;
      padding-left: 1rem !important;
    }
    
    /* CSS Custom Properties that can pass through shadow boundaries */
    :root {
      --demo-bg-color: lightyellow;
      --demo-border-color: orange;
      --demo-text-color: #333;
    }
  </style>
</head>
<body>
  <h1>üåßÔ∏è Getting Started with RainJS</h1>
  
  <div class="example">
    <h2>Simple Counter</h2>
    <my-counter></my-counter>
  </div>

  <div class="example">
    <h2>Component with Props</h2>
    <user-card name="Alice" age="30" active="true"></user-card>
    <user-card name="Bob" age="25"></user-card>
    <user-card></user-card> <!-- Uses defaults -->
  </div>
  
  <div class="example">
    <h2>Slot Example - Content Projection</h2>
    <card-with-slot title="Project Status">
      <ul slot="content">
        <li>‚úÖ Design completed</li>
        <li>üîÑ Development in progress</li>
        <li>‚è≥ Testing pending</li>
      </ul>
    </card-with-slot>
    
    <card-with-slot title="User Info">
      <div slot="content">
        <p><strong>Name:</strong> Alice Johnson</p>
        <p><strong>Role:</strong> Developer</p>
        <p><strong>Team:</strong> Frontend</p>
      </div>
    </card-with-slot>
  </div>

  <div class="example">
    <h2>Shadow DOM Encapsulation</h2>
    <p>RainJS uses <strong>closed shadow DOM</strong> by default for complete encapsulation. Use <code>rain.open()</code> when you need external JavaScript access.</p>
    
    <h3>Closed Shadow DOM (default)</h3>
    <closed-demo></closed-demo>
    
    <h3>Open Shadow DOM (with rain.open())</h3>
    <open-demo></open-demo>
    
    <p><em>Components look identical, but check the browser console to see the difference in shadowRoot access!</em></p>
  </div>

  <!-- Load RainJS from local build -->
  <script src="./rainjs.umd.min.js"></script>
  
  <script>
    const { rain, html, $ } = RainJS
    
    // Simple counter component
    rain('my-counter', function() {
      const [count, setCount] = $(0)
      
      return () => html`
        <div>
          <h3>Count: ${count}</h3>
          <button @click=${() => setCount(count() - 1)}>-</button>
          <button @click=${() => setCount(count() + 1)}>+</button>
          <button @click=${() => setCount(0)}>Reset</button>
        </div>
      `
    })
    
    // Component with props
    rain('user-card', {
      name: { type: String, default: 'Anonymous' },
      age: { type: Number, default: 0 },
      active: { type: Boolean, default: false }
    }, function(props) {
      return () => html`
        <div>
          <h3>${props().name}</h3>
          <p>Age: ${props().age}</p>
          <p>Status: ${props().active ? '‚úÖ Active' : '‚≠ï Inactive'}</p>
        </div>
      `
    })
    
    // Slot example component
    rain('card-with-slot', {
      title: { type: String, default: 'Card Title' }
    }, function(props) {
      return () => html`
        <div>
          <h3>${props().title}</h3>
          <div>
            <slot name="content"></slot>
          </div>
        </div>
      `
    })
    
    // Shadow DOM examples
    
    // Closed shadow DOM (default) - external styles can't penetrate
    rain('closed-demo', function() {
      return () => html`
        <div style="padding: 1rem; border: 1px solid #ccc;">
          <p>üîí This is CLOSED shadow DOM (default)</p>
          <p>External styles cannot penetrate</p>
          <code>rain('closed-demo', ...)</code>
        </div>
      `
    })
    
    // Open shadow DOM - allows external access
    rain.open('open-demo', function() {
      return () => html`
        <div style="padding: 1rem; border: 1px solid #ccc;">
          <p>üîì This is OPEN shadow DOM</p>
          <p>External JavaScript can access shadowRoot</p>
          <code>rain.open('open-demo', ...)</code>
        </div>
      `
    })
    
    // Demo accessing shadow DOM programmatically
    setTimeout(() => {
      const closedComp = document.querySelector('closed-demo')
      const openComp = document.querySelector('open-demo')
      
      console.log('üîí Closed shadowRoot access:', closedComp.shadowRoot) // null
      console.log('üîì Open shadowRoot access:', openComp.shadowRoot)     // accessible
    }, 100)
  </script>
</body>
</html>